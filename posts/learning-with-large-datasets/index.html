<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learning with Large Datasets</title>
    <meta name="description" content="I am writing about anything I want">

    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="/css/prism-base16-monokai.dark.css">
    <link rel="stylesheet" href="/css/prism-diff.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    <link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="Nick Jantz">
    <link rel="alternate" href="/feed/feed.json" type="application/json" title="Nick Jantz">
  </head>
  <body>
    <header>
      <h1 class="home"><a href="/">Nick Jantz</a></h1>
      <li id="expander"><i class="bi bi-list"></i></li>
      <ul class="nav">
        <div id="nav-tray" class="display-none">
        <li class="nav-item"><a href="/">Home</a></li>
        <li class="nav-item"><a href="/posts/">Archive</a></li>
        <li class="nav-item"><a href="/about/">About Me</a></li>
        <li class="nav-item"><a href="/triathlon/">Triathlon</a></li>
        <li class="nav-item"><a href="/data-analysis/">Data Analysis</a></li>
        <li class="nav-item"><a href="/cyber-security/">Cyber Security</a></li>
        <li class="nav-item"><a href="/ukulele/">Ukulele</a></li>
        </div>
      </ul>
    </header>
    <script>
      let navTray = "close";
      const open = '<i class="bi bi-list">';
      const close = '<i class="bi bi-x">'
      document.getElementById("expander").addEventListener("click", () => {
        if (navTray === "open") {
          document.getElementById("expander").innerHTML = open;
          document.getElementById("nav-tray").classList.add("display-none");
          navTray = "close";
        } else if (navTray === "close") {
          document.getElementById("expander").innerHTML = close;
          document.getElementById("nav-tray").classList.remove("display-none");
          navTray = "open";
        }
      });
    </script>

    <main class="tmpl-post">


      <h1>Learning with Large Datasets</h1>



<div id="post-content">
<p>In my learning data science I like to work with publicly available datasets. There are quite a few places to get this, but one that I keep going back to are some of the open data sets from <a href="https://data.cityofchicago.org/">Chicago</a> and <a href="https://opendata.cityofnewyork.us/">New York</a>. They just have great documentation and easy to download sets of data. The problem is they're often on the larger size and can take up a lot of computing resources for something like a Jupyter notebook where you may be working a lot when first learning.</p>
<p>Luckily, you can go ahead and make mini versions of these datasets and then use them for any exploratory purposes before running full scripts on them, if you so choose. Here I will show you my approach to doing that. I realize there's ways to do this possibly by doing something like <code>ECHO head dataset.json &gt; mini-dataset.json</code> but for purposes of learning I wanted to test my python skills. <em>Edit note: see bottom of page for a simple 1 liner in bash</em></p>
<p>My goal was to take all my data files, stored in a single folder and make versions of them starting with mini-*** to make them easier to work with. Maybe only 100-200 rows long.</p>
<p>Since I'm doing this on all my data files I need to first gather them all in a list to loop through them. Coming from the web dev/JS world I am absolutely in love with list comprehensions.</p>
<pre class="language-python"><code class="language-python"><span class="token keyword">import</span> os<br><br>files <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">file</span> <span class="token keyword">for</span> <span class="token builtin">file</span> <span class="token keyword">in</span> os<span class="token punctuation">.</span>listdir<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">if</span> <span class="token builtin">file</span><span class="token punctuation">.</span>endswith<span class="token punctuation">(</span><span class="token string">'.csv'</span><span class="token punctuation">)</span><span class="token punctuation">]</span></code></pre>
<p>From there I will read through each file</p>
<pre class="language-python"><code class="language-python"><span class="token keyword">for</span> <span class="token builtin">file</span> <span class="token keyword">in</span> files<span class="token punctuation">:</span><br>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></code></pre>
<p>Read the file into a pandas data frame</p>
<pre class="language-python"><code class="language-python">read_file <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"data/</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">file</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span></code></pre>
<p>Write the first 150 lines into my new file</p>
<pre class="language-python"><code class="language-python">read_file<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">150</span><span class="token punctuation">]</span><span class="token punctuation">.</span>to_csv<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"mini-</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">file</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span></code></pre>
<p>Final file looks like</p>
<pre class="language-python"><code class="language-python"><span class="token keyword">import</span> os<br><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd<br><br>files <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">file</span> <span class="token keyword">for</span> <span class="token builtin">file</span> <span class="token keyword">in</span> os<span class="token punctuation">.</span>listdir<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">if</span> <span class="token builtin">file</span><span class="token punctuation">.</span>endswith<span class="token punctuation">(</span><span class="token string">'.csv'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><br><br><span class="token keyword">for</span> <span class="token builtin">file</span> <span class="token keyword">in</span> files<span class="token punctuation">:</span><br>  read_file <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"data/</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">file</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><br>  read_file<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">150</span><span class="token punctuation">]</span><span class="token punctuation">.</span>to_csv<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"mini-</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">file</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span></code></pre>
<p>As mentioned above the 1 liner in bash to achieve the same:</p>
<pre><code>for FILE in *.csv; do head -n 151 $FILE &gt; &quot;mini-$FILE&quot;; done
</code></pre>

</div>

<div id='post-footer'>
<hr>
<ul class='footer-pagination'><li class="next">Next: <a href="/posts/interesting-maker-blog-article/">Article about taking over a failed IOT company</a></li>
  
</ul>
</div>

    </main>

    <footer></footer>

    <!-- Current page: /posts/learning-with-large-datasets/ -->
  </body>
</html>
